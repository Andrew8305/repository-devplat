<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.cisiondata.modules.log.dao.UserAccessLogDAO">

	<resultMap type="UserAccessLog" id="UserAccessLogMap">
		<result column="id" property="id" jdbcType="INTEGER"/>
		<result column="ip" property="ip"/>
		<result column="url" property="url"/>
		<result column="access_time" property="accessTime" javaType="java.util.Date"/>
		<result column="params" property="params"/>
		<result column="total" property="total"/>
		<result column="account" property="account"/>
	</resultMap>
	<!-- 查询 -->
	<select id="selCount" parameterType="map" resultMap="UserAccessLogMap">
		SELECT * FROM T_LOG
		<where>
			<if test="account != null and account != ''">
				 account = #{account}
			</if>
			<if test="account != null and account != '' and params != null and params != ''">
				AND params = #{params}
			</if>
			<if test="account != null and account != '' and params == null or params == '' and startTime != null and endTime != null and startTime != '' and endTime != ''">
				AND access_time BETWEEN #{startTime} AND #{endTime}
			</if>
		</where>
		ORDER BY access_time DESC 
		<if test="startPos != null and pageSize != null">
			LIMIT #{startPos},#{pageSize}
		</if>
	</select>
</mapper>