<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.cisiondata.modules.system.dao.ResourceAttributeDAO">

	<resultMap type="org.cisiondata.modules.auth.entity.ResourceAttribute" id="AResourceAttributeModelMap">
		<id property="id" column="ID"/>
		<result column="RESOURCE_ID" property="resourceId"/>
		<result column="KEY" property="key"/>
		<result column="VALUE" property="value"/>
		<result column="TYPE" property="type"/>
	</resultMap>
	
	<!-- 查询 -->
	<select id="findByCondition" parameterType="map" resultMap="AResourceAttributeModelMap">
		select * from T_RESOURCE_ATTRIBUTE 
		<where>
    		<if test="id != null">ID=#{id}</if>
    		<if test="resourceId != null">and RESOURCE_ID=#{resourceId}</if>
    		<if test="key != null and key != ''">and `KEY`=#{key}</if>
    		<if test="value != null and vlue != ''">and `VALUE`=#{value}</if>
    		<if test="type != null and type != ''">and TYPE=#{type}</if>
    	</where>
    	<if test="orderBy != null and orderBy !=''">
    		order by ${orderBy}
    	</if>
    	<if test="begin != null and pageSize != null">
    		limit #{begin},#{pageSize}
    	</if>
	</select>
	
	<delete id="deleteById">
		delete from T_RESOURCE_ATTRIBUTE where ID=#{id}
	</delete>
	
	<!-- 查询总条数 -->
	<select id="findCountByCondition" parameterType="map">
		select COUNT(ID) from T_RESOURCE_ATTRIBUTE
		<where>
    		<if test="id != null">ID=#{id}</if>
    		<if test="resourceId != null">and RESOURCE_ID=#{resourceId}</if>
    		<if test="key != null and key != ''">and `KEY`=#{key}</if>
    		<if test="value != null and vlue != ''">and `VALUE`=#{value}</if>
    		<if test="type != null and type != ''">and TYPE=#{type}</if>
    	</where>
	</select>
	
	<!-- 根据id修改 -->
	<update id="updateResourceAttributeById" parameterType="org.cisiondata.modules.auth.entity.ResourceAttribute">
	   	update T_RESOURCE_ATTRIBUTE 
   		<set>
   			<if test="resourceId != null">RESOURCE_ID=#{resourceId},</if>
    		<if test="key != null and key != ''">`KEY`=#{key},</if>
    		<if test="value != null and vlue != ''">`VALUE`=#{value},</if>
    		<if test="type != null and type != ''">TYPE=#{type}</if>
   		</set>
	   	WHERE ID=#{id}
	</update>
	
	<!-- 新增，新增成功后返回id值 -->
	<insert id="addResourceAttribute" parameterType="org.cisiondata.modules.auth.entity.ResourceAttribute" useGeneratedKeys="true" keyProperty="id">
		insert into T_RESOURCE_ATTRIBUTE
		(RESOURCE_ID,`KEY`,`VALUE`,TYPE)
		values
		(#{resourceId},#{key},#{value},#{type})
	</insert>
	
</mapper>